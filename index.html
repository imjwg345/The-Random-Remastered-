<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Random (Remastered)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Rules Modal -->
  <dialog id="rulesModal" class="modal">
    <div class="modal__head">
      <div class="modal__title">📜 게임 규칙</div>
      <button class="iconbtn" id="btnCloseRules" aria-label="닫기">✕</button>
    </div>
    <div class="modal__body" id="rulesBody"></div>
    <div class="modal__foot">
      <button class="btn btn--primary" id="btnRulesOk">확인</button>
    </div>
  </dialog>

  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar__brand">
        <div class="brand__title">The Random</div>
        <div class="brand__sub">Remastered · Web</div>
      </div>

      <div class="sbcard">
        <div class="sbcard__title">설정</div>

        <div class="control">
          <label class="label" for="difficulty">난이도</label>
          <select id="difficulty" class="input">
            <option value="쉬움">쉬움 (1~50 / 8회)</option>
            <option value="보통" selected>보통 (1~100 / 6회)</option>
            <option value="어려움">어려움 (1~500 / 9회)</option>
          </select>
        </div>

        <label class="toggle">
          <input type="checkbox" id="dupPenalty" />
          <span>중복 입력도 차감</span>
        </label>

        <div class="sbrow">
          <button class="btn" id="btnShowRules">규칙 보기</button>
          <button class="btn" id="btnRefreshRank">랭킹 새로고침</button>
        </div>

        <div class="help">
          Streamlit처럼 <b>사이드바=설정</b>, <b>메인=게임</b> 구조로 배치했습니다.
        </div>
      </div>

      <div class="divider"></div>

      <!-- Optional: sidebar ranking -->
      <div class="sbcard">
        <div class="sbcard__title">🏆 랭킹 TOP 10</div>
        <div class="sblist" id="rankTop10">
          <div class="muted">로딩 중...</div>
        </div>
      </div>

      <div class="sidebar__foot muted">© The Random</div>
    </aside>

    <!-- Main -->
    <main class="main">
      <!-- Streamlit title 느낌 -->
      <header class="head">
        <div>
          <h1 class="title">🎯 The Random (Remastered)</h1>
          <p class="subtitle">업다운 + 뜨/따/차 + 범위 축소 + 중복 옵션</p>
        </div>
        <div class="badge" id="badgePhase">START</div>
      </header>

      <!-- START -->
      <section class="card" id="screenStart">
        <div class="card__head">
          <div class="card__title">시작하기</div>
          <div class="card__sub">닉네임 입력 후 시작 (규칙 창은 시작 화면에서 자동 표시)</div>
        </div>

        <div class="grid">
          <div class="control">
            <label class="label" for="nick">닉네임</label>
            <input id="nick" class="input" placeholder="예: 주완봇" maxlength="12" />
          </div>
          <div class="control control--btn">
            <label class="label label--ghost"> </label>
            <button class="btn btn--primary" id="btnStartGame">게임 시작</button>
          </div>
        </div>

        <div class="notice notice--info" id="startNotice">
          사이드바에서 난이도/중복 옵션을 먼저 정한 뒤 시작해도 됩니다.
        </div>
      </section>

      <!-- PLAYING -->
      <section class="card" id="screenPlay" style="display:none;">
        <div class="card__head">
          <div class="card__title">플레이</div>
          <div class="card__sub">
            플레이어: <b id="playerName">-</b> · 난이도: <b id="playerDiff">-</b>
          </div>
        </div>

        <!-- progress (Streamlit progress 느낌) -->
        <div class="progress">
          <div class="progress__bar"><div class="progress__fill" id="progressFill"></div></div>
          <div class="progress__txt muted" id="progressText">0/0</div>
        </div>

        <!-- message box (Streamlit st.info/st.success/st.error 느낌) -->
        <div class="notice" id="msgBox">게임을 시작했습니다! 숫자를 입력해보세요.</div>

        <!-- input form: Streamlit form 느낌 -->
        <div class="grid">
          <div class="control">
            <label class="label" for="guess">숫자 입력</label>
            <input id="guess" class="input" placeholder="숫자" inputmode="numeric" />
          </div>
          <div class="control control--btn">
            <label class="label label--ghost"> </label>
            <button class="btn btn--primary" id="btnGuess">확인</button>
          </div>
        </div>

        <!-- meta cards -->
        <div class="metagrid">
          <div class="metacard">
            <div class="metacard__k">남은 시도</div>
            <div class="metacard__v" id="remain">-</div>
          </div>
          <div class="metacard">
            <div class="metacard__k">가능 범위</div>
            <div class="metacard__v" id="range">-</div>
          </div>
          <div class="metacard metacard--wide">
            <div class="metacard__k">입력 히스토리</div>
            <div class="metacard__v metacard__v--small" id="history">-</div>
          </div>
        </div>

        <!-- action buttons -->
        <div class="row">
          <button class="btn" id="btnRestartRound">이번 판 다시 시작</button>
          <button class="btn btn--danger" id="btnGoStart">시작 화면으로</button>
        </div>
      </section>

      <!-- END -->
      <section class="card" id="screenEnd" style="display:none;">
        <div class="card__head">
          <div class="card__title">결과</div>
          <div class="card__sub">이번 판 결과입니다.</div>
        </div>

        <div class="notice" id="endBox">-</div>

        <div class="metagrid">
          <div class="metacard">
            <div class="metacard__k">정답</div>
            <div class="metacard__v" id="answerText">-</div>
          </div>
          <div class="metacard">
            <div class="metacard__k">시도</div>
            <div class="metacard__v" id="attemptText">-</div>
          </div>
          <div class="metacard metacard--wide">
            <div class="metacard__k">입력 기록</div>
            <div class="metacard__v metacard__v--small" id="endHistory">-</div>
          </div>
        </div>

        <div class="row">
          <button class="btn btn--primary" id="btnPlayAgain">다시 시작</button>
          <button class="btn btn--danger" id="btnEndGoStart">시작 화면</button>
        </div>
      </section>
    </main>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>

